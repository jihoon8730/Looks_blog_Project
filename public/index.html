<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <!-- bootstrap cdn -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
  <link rel="stylesheet" href="index.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
    crossorigin="anonymous"></script>
</head>

<body>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>

  <div class="wrap">
    <!-- Modalì°½ ë¶€ë¶„ -->
    <div class="black-modal">
      <div class="white-modal">
        <h3 style="font-weight: bold;">ê¸€ì“°ê¸° ë²„íŠ¼ í´ë¦­</h3>
        <h4>1. Titleë€ì— ì œëª©ì„ ì…ë ¥</h4>
        <h4>2. nameë€ì— ì´ë¦„ì´ë‚˜ ë‹‰ë„¤ì„ì„ ì…ë ¥</h4>
        <h4>3. contentsë€ì— ì ê³ ì‹¶ì€ ë‚´ìš©ì„ ì…ë ¥</h4>
        <h4>3. ê¸€ë°œí–‰ ë²„íŠ¼ í´ë¦­</h4>
        <button type="button" class="btn btn-danger modal-close">ë‹«ê¸°</button>
      </div>
    </div>

    <!-- Update blog form modalì°½ -->
    <div class="bkBlog-modal">
      <div class="wtBlog-modal">
        <form>
          <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
            <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
          </div>
          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input type="password" class="form-control" id="exampleInputPassword1">
          </div>
          <div class="form-group">
            <label for="exampleFormControlTextarea1">Example textarea</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
          </div>
          <!-- <button type="submit" class="btn btn-primary">ìˆ˜ì •</button> -->
        </form>
      </div>
    </div>

    <div class="container">
      <!-- Navbar ë¶€ë¶„ (bootstrap ì‚¬ìš©) -->
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark nav-center">
        <a class="navbar-brand" href="#">L O O K S</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="shop.html">Shop</a>
            </li>
          </ul>
          <!-- Darkmode -->
          <div class="badge bg-light" style="cursor: pointer;">DarkModeğŸ”„</div>
        </div>
      </nav>

      <!-- mainíƒ€ì´í‹€(LOOKSì œëª©) -->
      <div class="main-title">
        <p class="font-weight-bold">LOOKS<span class="font-italic">.blog</span></p>
      </div>

      <div class="main-btn">
        <button type="button" class="btn btn-dark p-2" id="main-blog">ê¸€ì“°ê¸°</button>
        <button type="button" class="btn btn-dark p-2" id="main-tuto">ì‚¬ìš©ë°©ë²•</button>
      </div>

      <!-- blogê¸€ì“°ê¸° ì…ë ¥ë€ form -->
      <form class="w-75 blog-form" id="blogForm">
        <div class="form-group font-weight-bold" </div>
          <label for="exampleFormControlInput1">Titile</label>
          <input type="text" style='IME-MODE: active' class="form-control" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.">
        </div>
        <div class="form-group font-weight-bold" </div>
          <label for="exampleFormControlInput1">name</label>
          <input type="text" class="form-control" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.">
        </div>
        <div class="form-group font-weight-bold">
          <label for="exampleFormControlTextarea1">contents</label>
          <textarea class="form-control" rows="3" id="contents" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”."></textarea>
        </div>
        <div class="text-md-right">
          <button type="button" class="btn btn-dark" id="blogformClose">ë‹«ê¸°</button>
          <button type="button" class="btn btn-primary" id="blogPrint">ê¸€ë°œí–‰</button>
        </div>
      </form>

      <!-- <button type="button" class="btn btn-info" id="blogUpdate">ìˆ˜ì •</button> -->

      <!-- card formë¶€ë¶„ -->
      <div class="row">
      </div>
    </div>
  </div>
  
  <!-- firebase -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAoO-A3XK8CW505_4pcFhBb1voYoLFkJGU",
      authDomain: "blogproject-1c80d.firebaseapp.com",
      projectId: "blogproject-1c80d",
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>

  <script>
    const db = firebase.firestore();
    db.collection('blog').get().then((result) => {
      result.forEach((doc) => {
        let temp = `<div id="cardList" class="card col-md-12 mt-3" style="width: 18rem;">
                      <div class="card-body cardBody-border">
                        <h5 class="card-title">${doc.data().title}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">${doc.data().name}</h6>
                        <p class="card-text">${doc.data().contents}</p>
                      </div>
                      <button type="button" class="btn btn-dark blogDelete" value="${doc.id}">ì‚­ì œ</button>
                      <button type="button" class="blogUpdate btn btn-info">ìˆ˜ì •</button>
                    </div>`
        $('.row').append(temp);

        // ì¤‘ìš”!!!!!! ì‚­ì œ ê´€ë ¨ ê¸°ëŠ¥ êµ¬í˜„ ë¬¸ì œì  í•´ê²°ë²•
        // IDê°’ ê°€ì ¸ì˜¤ëŠ” ê³³ !! ìŒ ë­ê°€ ë¬¸ì œì§€?
        // ì¤‘ìš”!! 3ì›” 10ì¼ ì§€ê¸ˆê¹Œì§€ ë‚˜ëŠ” ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í• ë•Œ ì²«ë²ˆì¬ ì•¨ë¦¬ë¨¼íŠ¸(ì²«ë²ˆì§¸ ë¸”ë¡œê·¸ì¹´ë“œë§Œ) ì£¼êµ¬ì¥ì°½ ì§€ìš°ê³  ìˆì—ˆìŒ
        // ë‚´ê°€ íŒë‹¨í•˜ê¸°ë¡œëŠ” ê¸€ì„ ë§Œë“¤ë•Œ í•­ìƒ ì²«ë²ˆì§¸ê°€ ë˜ê¸° ë•Œë¬¸ì— ê·¸ë¬ë˜ê±° ê°™ìŒ
        // $(this)ë¼ëŠ”ê±¸ í†µí•´ ë²„íŠ¼ì— ë“¤ì–´ê°€ìˆëŠ” idê°’ì„ ì—¬ê¸° ì´ê²ƒì˜ ë²„íŠ¼ì„ ì´ë¼ê³  ë°”ê¿€ ìˆ˜ ê°€ ìˆë‚˜ë´„ ê°„ë‹¨í•˜ê²Œ
        // í´ë¦­í•˜ëŠ” ë²„íŠ¼ì˜ ê°’ì„ ~~ ì´ê²Œ $(this).val() ì¸ê°€ë´„
        // ë°‘ì—ëŠ” okky í•´ê²°ì‚¬ë‹˜ì´ ì•Œë ¤ì£¼ì‹  í•´ë‹µ ë²•

        // ì§ˆë¬¸ìë‹˜ê»˜ì„œëŠ” firebaseë³´ë‹¤ëŠ” JS DOM ì¡°ì‘ ëŒ€í•œ ì´í•´ê°€ ë¶€ì¡±í•´ ë³´ì…ë‹ˆë‹¤.

        // ì§ˆë¬¸ì ë‹˜ì˜ ì½”ë“œë¥¼ ë³´ë©´ blogDelete í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ì—˜ë¦¬ë¨¼íŠ¸ ì¤‘ ì œì¼ ì²« ë²ˆì§¸ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ê°’ì„ valueIdì— ë„£ê³  í´ë¦­ì„ í•  ë•Œë§ˆë‹¤ ê·¸ ê°’ì„ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ì§€ìš°ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬ë©´ ë‹¹ì—°íˆ ì²«ë²ˆì¨° ë°ì´í„°ë§Œ ì§€ì›Œì§€ê² ì§€ìš”.

        // ì§ˆë¬¸ìë‹˜ì˜ ì˜ë„ëŠ” í´ë¦­í•œ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ë°ì´í„°ë¥¼ ì§€ìš°ëŠ” ê²ƒì´ì§€ìš”? ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ë‹¹ì—°íˆ í´ë¦­í•œ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ê°’ì„ ì½ì–´ì™€ì„œ ì²˜ë¦¬í•´ì•¼ ë©ë‹ˆë‹¤.

        // í•´ë‹¹ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆê² ì§€ë§Œ, ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œëŠ”

        // click(function() { let valueId = $(this).val(); })

        // ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ë²•ì´ ìˆìœ¼ë‹ˆ ì ìš©í•´ ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.
      })
      $('.blogDelete').click(function() {
        let valueId = $(this).val();
        db.collection('blog').doc(valueId).delete().then(() => {
          alert('ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.')
          window.location.reload();
        });
        console.log(valueId);
      });
    });

    $('#blogPrint').click(function() {
      let title = $('#title').val();
      let name = $('#name').val();
      let contents = $('#contents').val();
      
      if (title === "") {
        alert('ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”!');
        return false;
      } else if (name === "") {
        alert('ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”!')
        return false;
      } else if (contents === "") {
        alert('ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”!')
        return false;
      } else {
        alert('ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.')
        let blogInput = {
        title : $('#title').val(),
        name : $('#name').val(),
        contents : $('#contents').val()
        }
        db.collection('blog').add(blogInput).then((result) => {
          window.location.reload();
        });
        // bolg ê¸€ë°œí–‰ í´ë¦­ í›„ input ê°’ ì´ˆê¸°í™” null
        $('#title').val(null);
        $('#name').val(null);
        $('#contents').val(null);
      }
    });
  </script>



  <!-- JSíŒŒì¼ ë¡œë“œ -->
  <script src="index.js"></script>
  <!-- jQuery cdn -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</body>

<!-- 3ì›” 9ì¼ í˜„ì¬ ê³µë°±ì´ì—¬ë„ ë°ì´í„°ê°€ firebaseë¡œ ë„˜ì–´ê° -->
<!-- return : fasleë¡œ í•´ê²°í•¨! -->

<!-- 3ì›”9ì¼ í˜„ì¬ ë°ì´í„° ì‚­ì œ ë¬¸ì œ í•´ê²° ì¤‘  -->
<!-- ë¸”ë¡œê·¸ ê¸€ì„ dbì—ì„œ ê°€ì ¸ì˜¬ ë•Œ document idë„ ê°™ì´ ì¶œë ¥í•´ë³¼ ìˆ˜ ìˆëŠ”ë°

ê·¸ê±¸ ì‚­ì œë²„íŠ¼ì´ë‚˜ ì£¼ë³€ <input> ì´ëŸ° ê³³ì— ëª°ë˜ ìˆ¨ê²¨ë†“ê³  

ì‚­ì œë²„íŠ¼ ëˆ„ë¥´ë©´ db.collection("cities").doc(ìˆ¨ê²¨ë†¨ë˜id).delete().then()

ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤  -->

<!-- 3ì›” 10ì¼ í˜„ì¬ ë¬¸ì œ -->
<!-- ì‚­ì œë¥¼ ëˆ„ë¥´ë©´ idê°’ì´ ì°¨ë¡€ëŒ€ë¡œ ì‚­ì œê°€ ë¨ (ë‚´ê°€ ì›í•˜ëŠ”ê²Œ ì‚­ì œê°€ ì•ˆë¨!!) -->
<!-- ì‚­ì œ ë²„íŠ¼ ë””ìì¸ í•´ë³´ì..! -->
<!-- í•´ê²°~! ìœ„ì— ì£¼ì„ ì°¸ê³ -->

<!-- 3ì›” 11ì¼ -->
<!-- ì´ì œ ë§Œë“¤ì–´ ë³¼ê²ƒ -->
<!-- CRUDë¥¼ ê¸°ë°˜ìœ¼ë¡œ Updateí•´ë³´ê¸° -->
<!-- 3ì›” 12ì¼ Updateê³„ì† ì§„í–‰ í•˜ê¸° -->

</html>